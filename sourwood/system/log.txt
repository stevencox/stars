
PLAY [masters] *****************************************************************

TASK [setup] *******************************************************************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [zookeeper : Add optional custom apt repositories (for additional zookeeper versions)] ***

TASK [zookeeper : Update apt cache] ********************************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : Apt install required system packages.] ***********************
skipping: [stars-dc0.edc.renci.org] => (item=[]) 
skipping: [stars-dc1.edc.renci.org] => (item=[]) 

TASK [zookeeper : Overwrite myid file.] ****************************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : Overwrite default config file] *******************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : Ensure the tarball dir exists at /opt/src] *******************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : Ensure the zookeeper dir exists at /opt/zookeeper-3.4.6] *****
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : Download zookeeper version.] *********************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : Unpack tarball.] *********************************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : group] *******************************************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : user] ********************************************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : Change ownership on zookeeper directory.] ********************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : Create zookeeper {{item}} directory.] ************************
skipping: [stars-dc0.edc.renci.org] => (item=/var/lib/zookeeper) 
skipping: [stars-dc0.edc.renci.org] => (item=/var/log/zookeeper) 
skipping: [stars-dc1.edc.renci.org] => (item=/var/lib/zookeeper) 
skipping: [stars-dc1.edc.renci.org] => (item=/var/log/zookeeper) 

TASK [zookeeper : Write myid file.] ********************************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : Configure zookeeper zoo.cfg] *********************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : Add zookeeper's bin dir to the PATH] *************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : Check if /etc/init exists] ***********************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : Upstart script.] *********************************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : Systemd script.] *********************************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : Install OS Packages] *****************************************
ok: [stars-dc0.edc.renci.org] => (item=['libselinux-python'])
ok: [stars-dc1.edc.renci.org] => (item=['libselinux-python'])

TASK [zookeeper : Ensure the tarball dir exists at /opt/src] *******************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [zookeeper : Ensure the zookeeper dir exists at /opt/zookeeper-3.4.6] *****
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [zookeeper : Download zookeeper version.] *********************************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [zookeeper : Unpack tarball.] *********************************************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [zookeeper : group] *******************************************************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [zookeeper : user] ********************************************************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [zookeeper : Change ownership on zookeeper directory.] ********************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [zookeeper : Create zookeeper {{item}} directory.] ************************
ok: [stars-dc0.edc.renci.org] => (item=/var/lib/zookeeper)
ok: [stars-dc1.edc.renci.org] => (item=/var/lib/zookeeper)
ok: [stars-dc0.edc.renci.org] => (item=/var/log/zookeeper)
ok: [stars-dc1.edc.renci.org] => (item=/var/log/zookeeper)

TASK [zookeeper : Write myid file.] ********************************************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [zookeeper : Configure zookeeper zoo.cfg] *********************************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [zookeeper : Add zookeeper's bin dir to the PATH] *************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : Check if /etc/init exists] ***********************************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [zookeeper : Upstart script.] *********************************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : Systemd script.] *********************************************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [zookeeper : Configure zookeeper-env.sh] **********************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [zookeeper : Update the log4j config with saner production values] ********
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [zookeeper : Enable zookeeper service] ************************************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [mesos : include_vars] ****************************************************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [mesos : debug] ***********************************************************
ok: [stars-dc0.edc.renci.org] => {
    "msg": "Install Mode is master"
}
ok: [stars-dc1.edc.renci.org] => {
    "msg": "Install Mode is master"
}

TASK [mesos : Add apt-key] *****************************************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [mesos : Add mesosphere repo] *********************************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [mesos : Install Debian OS packages] **************************************
skipping: [stars-dc0.edc.renci.org] => (item=[]) 
skipping: [stars-dc1.edc.renci.org] => (item=[]) 

TASK [mesos : Add mesosphere repo] *********************************************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [mesos : Downloading and enable the EPEL repository definitions.] *********
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [mesos : Install os packages] *********************************************
ok: [stars-dc1.edc.renci.org] => (item=['wget', 'curl', 'unzip', 'libselinux-python', 'python-setuptools', 'mesos-1.0.1'])
ok: [stars-dc0.edc.renci.org] => (item=['wget', 'curl', 'unzip', 'libselinux-python', 'python-setuptools', 'mesos-1.0.1'])

TASK [mesos : create work dir] *************************************************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [mesos : Remove Default Mesos Configs] ************************************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [mesos : Remove Mesos ZK File] ********************************************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [mesos : Remove Default Mesos-Master Config] ******************************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [mesos : Remove Default Mesos-Slave Config] *******************************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [mesos : Mesos default config file] ***************************************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [mesos : Mesos Master config file] ****************************************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [mesos : Mesos Slave config file] *****************************************
skipping: [stars-dc1.edc.renci.org]
skipping: [stars-dc0.edc.renci.org]

TASK [mesos : Mesos master upstart script] *************************************
skipping: [stars-dc1.edc.renci.org]
skipping: [stars-dc0.edc.renci.org]

TASK [mesos : Mesos slave upstart script] **************************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [mesos : Check if systemd exists] *****************************************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [mesos : Mesos master systemd script] *************************************
changed: [stars-dc1.edc.renci.org]
changed: [stars-dc0.edc.renci.org]

TASK [mesos : Mesos slave systemd script] **************************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [mesos : Enable/Disable mesos-master service] *****************************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [mesos : Enable/Disable mesos-slave service] ******************************
changed: [stars-dc0.edc.renci.org]
changed: [stars-dc1.edc.renci.org]

TASK [marathon : include_vars] *************************************************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [marathon : Add apt-key] **************************************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [marathon : Add Mesosphere repo] ******************************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [marathon : Install Marathon package] *************************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [marathon : Add mesosphere repo] ******************************************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [marathon : Install Marathon] *********************************************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [marathon : Create Marathon conf directory] *******************************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [marathon : Set required --master option] *********************************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [marathon : Remove optional --artifact_store option] **********************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [marathon : Set optional --artifact_store option] *************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [marathon : Remove optional --checkpoint option] **************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [marathon : Set optional --checkpoint option] *****************************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [marathon : Remove optional --zk option] **********************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [marathon : Set optional --zk option] *************************************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [marathon : Remove optional --mesos_role option] **************************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [marathon : Set optional --mesos_role option] *****************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [marathon : Set --hostname option] ****************************************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [marathon : Set --http-port option] ***************************************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [marathon : Set additional options] ***************************************

TASK [marathon : Upstart environment variables] ********************************
skipping: [stars-dc0.edc.renci.org] => (item=JAVA_OPTS=-Xmx512m) 
skipping: [stars-dc1.edc.renci.org] => (item=JAVA_OPTS=-Xmx512m) 

TASK [marathon : Create /usr/lib/systemd/system/marathon.service.d directory] **
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [marathon : Systemd environment variables] ********************************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [marathon : Check HAProxy] ************************************************
ok: [stars-dc0.edc.renci.org]
ok: [stars-dc1.edc.renci.org]

TASK [marathon : Setup HAProxy script] *****************************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [marathon : Setup cron job for HAProxy] ***********************************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [marathon : Make sure service dropin directory is available] **************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [marathon : Add SSL settings/environment variables] ***********************
skipping: [stars-dc0.edc.renci.org]
skipping: [stars-dc1.edc.renci.org]

TASK [marathon : Remove SSL settings/environment variables] ********************
ok: [stars-dc1.edc.renci.org]
ok: [stars-dc0.edc.renci.org]

TASK [marathon : Enable Marathon service] **************************************
ok: [stars-dc0.edc.renci.org]
fatal: [stars-dc1.edc.renci.org]: FAILED! => {"changed": false, "failed": true, "msg": "Could not find the requested service marathon: cannot enable"}

TASK [chronos : include_vars] **************************************************
ok: [stars-dc0.edc.renci.org]

TASK [chronos : Add apt-key] ***************************************************
skipping: [stars-dc0.edc.renci.org]

TASK [chronos : Add Mesosphere repo] *******************************************
skipping: [stars-dc0.edc.renci.org]

TASK [chronos : Install Chronos package] ***************************************
skipping: [stars-dc0.edc.renci.org]

TASK [chronos : Add mesosphere repo] *******************************************
ok: [stars-dc0.edc.renci.org]

TASK [chronos : Install Chronos] ***********************************************
ok: [stars-dc0.edc.renci.org]

TASK [chronos : create chronos conf directory] *********************************
ok: [stars-dc0.edc.renci.org]

TASK [chronos : systemd check] *************************************************
ok: [stars-dc0.edc.renci.org]

TASK [chronos : (systemd) configure chronos unit file - requires] **************
ok: [stars-dc0.edc.renci.org] => (item={'replace': 'After=mesos-master.service \\1', 'regexp': '^After=((?!mesos-master.service).*)$'})
ok: [stars-dc0.edc.renci.org] => (item={'replace': 'Wants=mesos-master.service \\1', 'regexp': '^Wants=((?!mesos-master.service).*)$'})

TASK [chronos : (systemd) configure chronos unit file - pre start] *************
ok: [stars-dc0.edc.renci.org] => (item=chronos_systemd_unit_startpre)

TASK [chronos : fix chronos bin file] ******************************************
ok: [stars-dc0.edc.renci.org]

TASK [chronos : set key/value options] *****************************************
ok: [stars-dc0.edc.renci.org] => (item={'value': 'zk://stars-dc0.edc.renci.org:2181/mesos', 'key': 'master'})
ok: [stars-dc0.edc.renci.org] => (item={'value': 'stars-dc0.edc.renci.org', 'key': 'hostname'})
ok: [stars-dc0.edc.renci.org] => (item={'value': 'chronos', 'key': 'mesos_framework_name'})
ok: [stars-dc0.edc.renci.org] => (item={'value': 'zk://stars-dc0.edc.renci.org:2181/chronos', 'key': 'zk_hosts'})
ok: [stars-dc0.edc.renci.org] => (item={'value': 4400, 'key': 'http_port'})

TASK [chronos : set sysconfig variable] ****************************************
ok: [stars-dc0.edc.renci.org] => (item={'value': '172.25.8.220', 'key': 'LIBPROCESS_IP'})

TASK [chronos : enable chronos service] ****************************************
ok: [stars-dc0.edc.renci.org]

TASK [chronos : Check HAProxy] *************************************************
skipping: [stars-dc0.edc.renci.org]

TASK [chronos : Setup HAProxy script] ******************************************
skipping: [stars-dc0.edc.renci.org]

TASK [chronos : Create HAProxy reload script] **********************************
skipping: [stars-dc0.edc.renci.org]

TASK [chronos : Setup cron job for HAProxy] ************************************
skipping: [stars-dc0.edc.renci.org]

TASK [chronos : Delete old slave info to ensure clean startup of Chronos after an upgrade] ***
ok: [stars-dc0.edc.renci.org]

TASK [jeffhung.localrepo : Ensure libselinux-python is installed] **************
ok: [stars-dc0.edc.renci.org]

TASK [jeffhung.localrepo : Ensure createrepo is installed] *********************
ok: [stars-dc0.edc.renci.org]

TASK [jeffhung.localrepo : Ensure localrepo directory exist] *******************
ok: [stars-dc0.edc.renci.org]

TASK [jeffhung.localrepo : Force reindex localrepo] ****************************
changed: [stars-dc0.edc.renci.org]

RUNNING HANDLER [mesos : Reload daemon] ****************************************
changed: [stars-dc0.edc.renci.org]

RUNNING HANDLER [mesos : Restart mesos-master] *********************************
changed: [stars-dc0.edc.renci.org]

RUNNING HANDLER [jeffhung.localrepo : reindex localrepo] ***********************
changed: [stars-dc0.edc.renci.org]

TASK [jeffhung.localrepo : Ensure localrepo is configured] *********************
ok: [stars-dc0.edc.renci.org]

TASK [jeffhung.java-se : Ensure libselinux-python is installed] ****************
ok: [stars-dc0.edc.renci.org]

TASK [jeffhung.java-se : Ensure createrepo is installed] ***********************
ok: [stars-dc0.edc.renci.org]

TASK [jeffhung.java-se : Ensure localrepo directory exist] *********************
ok: [stars-dc0.edc.renci.org]

TASK [jeffhung.java-se : Force reindex localrepo] ******************************
changed: [stars-dc0.edc.renci.org]

RUNNING HANDLER [jeffhung.localrepo : reindex localrepo] ***********************
changed: [stars-dc0.edc.renci.org]

TASK [jeffhung.java-se : Ensure localrepo is configured] ***********************
ok: [stars-dc0.edc.renci.org]

TASK [spark : Initiate build process] ******************************************
skipping: [stars-dc0.edc.renci.org]

TASK [spark : Set spark_bundle_name] *******************************************
ok: [stars-dc0.edc.renci.org]

TASK [spark : debug] ***********************************************************
ok: [stars-dc0.edc.renci.org] => {
    "spark_bundle_name": "spark-2.1.0-bin-hadoop2.6"
}

TASK [spark : Load spark binary tarbll MD5] ************************************
ok: [stars-dc0.edc.renci.org] => (item=spark-2.1.0-bin-hadoop2.6.tgz: 18 67 65 A9 58 38 60 2E  D8 1E A4 E9 27 05 61 F8)

TASK [spark : debug] ***********************************************************
ok: [stars-dc0.edc.renci.org] => {
    "spark_binary_md5": "186765a95838602ed81ea4e9270561f8"
}

TASK [spark : Ensure /vagrant/files exists] ************************************
ok: [stars-dc0.edc.renci.org]

TASK [spark : Download spark binary tarball] ***********************************
ok: [stars-dc0.edc.renci.org]

TASK [spark : Ensure /opt exists] **********************************************
ok: [stars-dc0.edc.renci.org]

TASK [spark : Unpack Spark distribution] ***************************************
skipping: [stars-dc0.edc.renci.org]

TASK [spark : Create canonical folder with symlink] ****************************
ok: [stars-dc0.edc.renci.org]

TASK [spark : Set environment variables globally] ******************************
ok: [stars-dc0.edc.renci.org]

TASK [zeppelin : Include OS family specific variables] *************************
ok: [stars-dc0.edc.renci.org]

TASK [zeppelin : Create the zeppelin group] ************************************
ok: [stars-dc0.edc.renci.org]

TASK [zeppelin : Create the zeppelin user] *************************************
ok: [stars-dc0.edc.renci.org]

TASK [zeppelin : Check if Java 8 is available from system repositories (Debian)] ***
skipping: [stars-dc0.edc.renci.org]

TASK [zeppelin : Check if Java 8 is available from system repositories (RedHat)] ***
ok: [stars-dc0.edc.renci.org]

TASK [zeppelin : Install common packages] **************************************
ok: [stars-dc0.edc.renci.org] => (item=['sudo'])

TASK [zeppelin : Install Java 8 package] ***************************************
ok: [stars-dc0.edc.renci.org]

TASK [zeppelin : Install Java 7 package] ***************************************
skipping: [stars-dc0.edc.renci.org]

TASK [zeppelin : Set Java home from system packages] ***************************
ok: [stars-dc0.edc.renci.org]

TASK [zeppelin : Create the zeppelin_working_directory] ************************
ok: [stars-dc0.edc.renci.org]

TASK [zeppelin : Check if the version of Zeppelin already exists] **************
ok: [stars-dc0.edc.renci.org]

TASK [zeppelin : Download Zeppelin] ********************************************
skipping: [stars-dc0.edc.renci.org]

TASK [zeppelin : Extract Zeppelin into the install directory] ******************
skipping: [stars-dc0.edc.renci.org]

TASK [zeppelin : Create a symlink for /opt/zeppelin] ***************************
skipping: [stars-dc0.edc.renci.org]

TASK [zeppelin : Create the Zeppelin Site config file] *************************
ok: [stars-dc0.edc.renci.org]

TASK [zeppelin : Create the Zeppelin ENV config file] **************************
ok: [stars-dc0.edc.renci.org]

TASK [zeppelin : Create the Zeppelin authentication config file] ***************
ok: [stars-dc0.edc.renci.org]

TASK [zeppelin : Set the service_control fact to False] ************************
ok: [stars-dc0.edc.renci.org]

TASK [zeppelin : Change the service_control fact to True] **********************
ok: [stars-dc0.edc.renci.org]

TASK [zeppelin : Copy the Zeppelin systemd service file] ***********************
ok: [stars-dc0.edc.renci.org]

TASK [zeppelin : Copy the Upstart service file] ********************************
skipping: [stars-dc0.edc.renci.org]

TASK [zeppelin : Ensure Zeppelin is started and enabled on boot] ***************
changed: [stars-dc0.edc.renci.org]
	to retry, use: --limit @/projects/stars/stack/v2/ansible/stars/stars-ansible/masters.retry

PLAY RECAP *********************************************************************
stars-dc0.edc.renci.org    : ok=100  changed=9    unreachable=0    failed=0   
stars-dc1.edc.renci.org    : ok=48   changed=2    unreachable=0    failed=1   

