#!/bin/bash

#set -x
set -e

for d in $(ls -1 roles | egrep -v "common|mesos-dns-client|mesos-dns-server" ); do
    echo $d
    p=$PWD
    cd roles/$d
    echo "+----------------------------------------------"
    printf "+-  %-25s\n" $d
    echo "+----------------------------------------------"
    git status -suno
    for f in $(git status -suno | egrep "^ M " | sed -e "s,M ,,g"); do
	echo $f
    	git diff $f | sed -e "s,^,    ,g"
    done
    cd $p
done

exit 0
